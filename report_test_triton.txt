============================= test session starts ==============================
platform linux -- Python 3.9.15, pytest-8.3.3, pluggy-1.5.0
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /app
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.6.2.post1, benchmark-4.0.0
collected 16 items

tests/test_benchmark.py::test_predict_latency 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.1266 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0352 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0348 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0356 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0349 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0324 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0063 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0052 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0059 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [  6%]
tests/test_benchmark.py::test_predict_load[short_text_positive] 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0059 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0056 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0060 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0062 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0062 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0061 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0063 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0065 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0063 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0056 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 12%]
tests/test_benchmark.py::test_predict_load[short_text_negative] 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0064 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0062 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0058 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0065 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0057 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0054 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0054 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0058 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0050 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0055 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 18%]
tests/test_benchmark.py::test_predict_load[long_text_positive] 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0062 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0064 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0059 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0056 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0060 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0061 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0062 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0064 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0059 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0059 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 25%]
tests/test_benchmark.py::test_predict_load[short_text_neutral] 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0109 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0057 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0061 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0064 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0054 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0063 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0059 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0051 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0056 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
INFO     uvicorn:triton_app.py:95 Prediction took 0.0052 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 31%]
tests/test_integration.py::test_root_endpoint 
-------------------------------- live log call ---------------------------------
INFO     httpx:_client.py:1038 HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
PASSED                                                                   [ 37%]
tests/test_integration.py::test_predict_empty_text 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0061 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 43%]
tests/test_integration.py::test_predict_endpoint[I love this!-positive-love] 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0057 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 50%]
tests/test_integration.py::test_predict_endpoint[This is terrible.-negative-terrible] 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0064 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 56%]
tests/test_integration.py::test_predict_endpoint[It's okay, nothing special.-neutral-okay] 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0127 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 62%]
tests/test_integration.py::test_predict_endpoint[-positive-] 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0060 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 68%]
tests/test_integration.py::test_predict_endpoint[Great quality, amazing product.-invalid_sentiment-Great quality, amazing product.] 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0053 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [ 75%]
tests/test_tensorflow.py::test_model_loading SKIPPED (Only for Tenso...) [ 81%]
tests/test_tensorflow.py::test_tensorflow_predict SKIPPED (Only for ...) [ 87%]
tests/test_triton.py::test_triton_preprocessing PASSED                   [ 93%]
tests/test_triton.py::test_triton_predict_endpoint 
-------------------------------- live log call ---------------------------------
INFO     uvicorn:triton_app.py:95 Prediction took 0.0060 seconds
INFO     httpx:_client.py:1038 HTTP Request: POST http://testserver/predict "HTTP/1.1 200 OK"
PASSED                                                                   [100%]


------------------------------------------------------------------------------------ benchmark 'load_test': 4 tests ------------------------------------------------------------------------------------
Name (time in ms)                             Min                Max              Mean            StdDev            Median               IQR            Outliers       OPS            Rounds  Iterations
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_predict_load[short_text_neutral]      6.6127 (1.0)      13.0322 (1.56)     8.1044 (1.05)     1.8170 (5.99)     7.7682 (1.01)     0.8728 (3.59)          1;1  123.3900 (0.95)         10           1
test_predict_load[short_text_negative]     6.8245 (1.03)      8.6912 (1.04)     7.6843 (1.0)      0.6173 (2.04)     7.6550 (1.0)      1.1011 (4.53)          4;0  130.1355 (1.0)          10           1
test_predict_load[long_text_positive]      7.3872 (1.12)      8.3422 (1.0)      8.0033 (1.04)     0.3032 (1.0)      8.0294 (1.05)     0.4421 (1.82)          3;0  124.9477 (0.96)         10           1
test_predict_load[short_text_positive]     7.6068 (1.15)      8.9325 (1.07)     7.9628 (1.04)     0.3814 (1.26)     7.8662 (1.03)     0.2432 (1.0)           1;1  125.5839 (0.97)         10           1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

--------------------------------------- benchmark 'predict_latency': 1 tests --------------------------------------
Name (time in ms)           Min      Max     Mean   StdDev   Median      IQR  Outliers      OPS  Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------
test_predict_latency     7.7114  37.3752  28.4574  13.9904  37.1266  22.4981       2;0  35.1403       7           1
-------------------------------------------------------------------------------------------------------------------

Legend:
  Outliers: 1 Standard Deviation from Mean; 1.5 IQR (InterQuartile Range) from 1st Quartile and 3rd Quartile.
  OPS: Operations Per Second, computed as 1 / Mean
================== 14 passed, 2 skipped, 2 warnings in 8.29s ===================
